--- udev-142/extras/rule_generator/write_cd_rules.orig	2008-12-22 14:05:10.000000000 +0000
+++ udev-142/extras/rule_generator/write_cd_rules	2009-05-13 20:32:01.000000000 +0100
@@ -3,7 +3,8 @@
 # This script is run if an optical drive lacks a rule for persistent naming.
 #
 # It adds symlinks for optical drives based on the device class determined
-# by cdrom_id and used ID_PATH to identify the device.
+# by cdrom_id and used ID_PATH or ID_SERIAL or ID_MODEL and ID_REVISION
+# to identify the device.
 #
 # (C) 2006 Marco d'Itri <md@Linux.IT>
 #
@@ -96,18 +97,59 @@
 choose_rules_file
 
 link_num=$(find_next_available 'cdrom[0-9]*')
+[ "$link_num" = "" ] && link_num=0
 
 match="ENV{ID_CDROM}==\"?*\", $RULE"
 
 comment="$ID_MODEL ($ID_PATH)"
-
 	write_rule "$match" "cdrom$link_num" "$comment"
-[ "$ID_CDROM_CD_R" -o "$ID_CDROM_CD_RW" ] && \
-	write_rule "$match" "cdrw$link_num"
-[ "$ID_CDROM_DVD" ] && \
-	write_rule "$match" "dvd$link_num"
-[ "$ID_CDROM_DVD_R" -o "$ID_CDROM_DVD_RW" -o "$ID_CDROM_DVD_RAM" ] && \
-	write_rule "$match" "dvdrw$link_num"
+	if [ "$(find_all_rules 'SYMLINK+=' cdrom)" = "" ]; then
+		write_rule "$match" "cdrom"
+	fi
+
+	if [ "$ID_CDROM_CD_R" ]; then
+	       	write_rule "$match" "cdr$link_num"
+		if [ "$(find_all_rules 'SYMLINK+=' cdr)" = "" ]; then
+			write_rule "$match" "cdr"
+		fi
+
+		write_rule "$match" "cdwriter$link_num"
+		if [ "$(find_all_rules 'SYMLINK+=' cdwriter)" = "" ]; then
+			write_rule "$match" "cdwriter"
+		fi
+
+		if [ "$ID_CDROM_CD_RW" ]; then
+			write_rule "$match" "cdrw$link_num"
+			if [ "$(find_all_rules 'SYMLINK+=' cdrw)" = "" ]; then
+				write_rule "$match" "cdrw"
+			fi
+		fi
+
+		if [ "$(find_all_rules 'SYMLINK+=' writer)" = "" ]; then
+			write_rule "$match" "writer"
+		fi
+	fi
+
+	if [  "$ID_CDROM_DVD" ]; then
+		write_rule "$match" "dvd$link_num"
+		if [ "$(find_all_rules 'SYMLINK+=' dvd)" = "" ]; then
+			write_rule "$match" "dvd"
+		fi
+
+		if [ "$ID_CDROM_DVD_R" -o "$ID_CDROM_DVD_RW" -o "$ID_CDROM_DVD_RAM" ]; then
+			write_rule "$match" "dvdrw$link_num"
+			if [ "$(find_all_rules 'SYMLINK+=' dvdrw)" = "" ]; then
+				write_rule "$match" "dvdrw"
+			fi
+
+			write_rule "$match" "dvdwriter$link_num"
+			if [ "$(find_all_rules 'SYMLINK+=' dvdwriter)" = "" ]; then
+				write_rule "$match" "dvdwriter"
+			fi
+		fi
+	fi
+
+
 
 unlock_rules_file
 
--- udev-142/rules/gentoo/40-gentoo.rules.orig	2009-01-27 10:55:41.000000000 +0000
+++ udev-142/rules/gentoo/40-gentoo.rules	2009-05-13 20:32:01.000000000 +0100
@@ -15,7 +15,7 @@
 SUBSYSTEM=="usb", ENV{DEVTYPE}=="usb_device", GROUP="usb"
 
 # dialout devices
-KERNEL=="ippp*|isdn*|dcbri*|rfcomm*|ttyACM[0-9]*|pilot", GROUP="dialout"
+KERNEL=="ippp*|isdn*|dcbri*|rfcomm*|ttyACM[0-9]*|pilot", GROUP="uucp"
 
 # sound devices (oss)
 SUBSYSTEM=="snd",	GROUP="audio"
--- udev-142/rules/rules.d/50-udev-default.rules.orig	2009-05-05 11:43:16.000000000 +0100
+++ udev-142/rules/rules.d/50-udev-default.rules	2009-05-13 20:33:17.000000000 +0100
@@ -12,10 +12,10 @@
 KERNEL=="vcs|vcs[0-9]*|vcsa|vcsa[0-9]*", GROUP="tty"
 
 # serial
-KERNEL=="tty[A-Z]*[0-9]|pppox[0-9]*|ircomm[0-9]*|noz[0-9]*|rfcomm[0-9]*", GROUP="dialout"
+KERNEL=="tty[A-Z]*[0-9]|pppox[0-9]*|ircomm[0-9]*|noz[0-9]*|rfcomm[0-9]*", GROUP="uucp"
 KERNEL=="ppp",			MODE="0600"
-KERNEL=="mwave",		NAME="modems/mwave", GROUP="dialout"
-KERNEL=="hvc*|hvsi*",		GROUP="dialout"
+KERNEL=="mwave",		NAME="modems/mwave", GROUP="uucp"
+KERNEL=="hvc*|hvsi*",		GROUP="uucp"
 
 # mem
 KERNEL=="null|zero|full|random|urandom", MODE="0666"
--- udev-142/rules/packages/40-isdn.rules.orig	2009-01-04 15:51:53.000000000 +0000
+++ udev-142/rules/packages/40-isdn.rules	2009-05-13 20:32:01.000000000 +0100
@@ -1,4 +1,4 @@
 # do not edit this file, it will be overwritten on update
 
-SUBSYSTEM=="capi", KERNEL=="capi", NAME="capi20", GROUP="dialout"
+SUBSYSTEM=="capi", KERNEL=="capi", NAME="capi20", GROUP="uucp"
 SUBSYSTEM=="tty", KERNEL=="capi[0-9]*", NAME="capi/%n"
--- udev-142/rules/packages/40-ppc.rules.orig	2009-01-04 15:51:37.000000000 +0000
+++ udev-142/rules/packages/40-ppc.rules	2009-05-13 20:32:01.000000000 +0100
@@ -3,4 +3,4 @@
 KERNEL=="iseries/ibmsis*",	NAME="%k", GROUP="disk"
 KERNEL=="iseries/nvt*",		NAME="%k", GROUP="disk"
 KERNEL=="iseries/vt*",		NAME="%k", GROUP="disk"
-KERNEL=="iseries/vtty*",	GROUP="dialout"
+KERNEL=="iseries/vtty*",	GROUP="uucp"
--- udev-142/rules/packages/40-zaptel.rules.orig	2009-01-05 16:48:00.000000000 +0000
+++ udev-142/rules/packages/40-zaptel.rules	2009-05-13 20:32:01.000000000 +0100
@@ -1,7 +1,7 @@
 # do not edit this file, it will be overwritten on update
 
-KERNEL=="zap[0-9]*",		NAME="zap/%n", GROUP="dialout"
-KERNEL=="zapchannel",		NAME="zap/channel", GROUP="dialout"
-KERNEL=="zapctl",		NAME="zap/ctl", GROUP="dialout"
-KERNEL=="zappseudo",		NAME="zap/pseudo", GROUP="dialout"
-KERNEL=="zaptimer",		NAME="zap/timer", GROUP="dialout"
+KERNEL=="zap[0-9]*",		NAME="zap/%n", GROUP="uucp"
+KERNEL=="zapchannel",		NAME="zap/channel", GROUP="uucp"
+KERNEL=="zapctl",		NAME="zap/ctl", GROUP="uucp"
+KERNEL=="zappseudo",		NAME="zap/pseudo", GROUP="uucp"
+KERNEL=="zaptimer",		NAME="zap/timer", GROUP="uucp"
